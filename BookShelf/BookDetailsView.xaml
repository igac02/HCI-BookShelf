<Window x:Class="BookShelf.Views.BookDetailsView"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:BookShelf.Views"
        mc:Ignorable="d"
        Title="{Binding Book.Title}" Height="700" Width="600"
        WindowStartupLocation="CenterScreen">

    <ScrollViewer VerticalScrollBarVisibility="Auto">
        <StackPanel Margin="20">
            <!-- Book Info Section -->
            <TextBlock Text="{Binding Book.Title}" FontSize="28" FontWeight="Bold" TextWrapping="Wrap"/>
            <TextBlock FontSize="18" Foreground="Gray" Margin="0,5,0,0">
                <Run Text="by"/>
                <Run Text="{Binding Book.Author.FullName}"/>
            </TextBlock>
            <Separator Margin="0,15,0,15"/>
            <TextBlock Text="{Binding Book.Description}" TextWrapping="Wrap" LineHeight="22" FontSize="14"/>

            <!-- Reviews Section -->
            <TextBlock Text="Customer Reviews" FontSize="22" FontWeight="Bold" Margin="0,30,0,10"/>
            <ItemsControl ItemsSource="{Binding Reviews}">
                <ItemsControl.ItemTemplate>
                    <DataTemplate>
                        <Border BorderBrush="LightGray" BorderThickness="0,0,0,1" Margin="0,10" Padding="0,10">
                            <StackPanel>
                                <TextBlock>
                                    <Run Text="{Binding Rating}" FontWeight="Bold"/>
                                    <Run Text="/ 5 stars - by"/>
                                    <Run Text="{Binding User.FullName}" FontWeight="SemiBold"/>
                                    <Run Text="on"/>
                                    <Run Text="{Binding ReviewDate, StringFormat='dd.MM.yyyy'}"/>
                                </TextBlock>
                                <TextBlock Text="{Binding Comment}" TextWrapping="Wrap" Margin="0,5,0,0"/>
                            </StackPanel>
                        </Border>
                    </DataTemplate>
                </ItemsControl.ItemTemplate>
            </ItemsControl>

            <!-- Add Review Section -->
            <GroupBox Header="Write a review" Margin="0,30,0,0" Padding="10">
                <StackPanel>
                    <TextBlock Text="Your Rating:" Margin="0,0,0,5"/>
                    <StackPanel Orientation="Horizontal" Margin="0,0,0,10">
                        <!-- Simple radio buttons for rating -->
                        <RadioButton Content="1" GroupName="Rating" IsChecked="{Binding NewRating, ConverterParameter=1, Converter={StaticResource IntToBoolConverter}}"/>
                        <RadioButton Content="2" GroupName="Rating" IsChecked="{Binding NewRating, ConverterParameter=2, Converter={StaticResource IntToBoolConverter}}" Margin="5,0"/>
                        <RadioButton Content="3" GroupName="Rating" IsChecked="{Binding NewRating, ConverterParameter=3, Converter={StaticResource IntToBoolConverter}}" Margin="5,0"/>
                        <RadioButton Content="4" GroupName="Rating" IsChecked="{Binding NewRating, ConverterParameter=4, Converter={StaticResource IntToBoolConverter}}" Margin="5,0"/>
                        <RadioButton Content="5" GroupName="Rating" IsChecked="{Binding NewRating, ConverterParameter=5, Converter={StaticResource IntToBoolConverter}}" Margin="5,0"/>
                    </StackPanel>

                    <TextBlock Text="Your Comment:" Margin="0,10,0,5"/>
                    <TextBox Text="{Binding NewComment, UpdateSourceTrigger=PropertyChanged}" 
                             Height="100" TextWrapping="Wrap" AcceptsReturn="True"
                             VerticalScrollBarVisibility="Auto"/>

                    <Button Content="Submit Review" Command="{Binding SubmitReviewCommand}" 
                            HorizontalAlignment="Right" Margin="0,15,0,0" Padding="15,8"/>
                </StackPanel>
            </GroupBox>
        </StackPanel>
    </ScrollViewer>
</Window>
